#include "position_update.h"

unsigned int IDtoInt(char* ID)
{
	unsigned int id = 0;
	int i;
	for (i = 0; i < 8; i++)
	{
		if (ID[i] >= '0' && ID[i] <= '9')
		{
			id = id + (ID[i] - '0');
		}
		else
		{
			if (ID[i] >= 'A' && ID[i] <= 'F')
			{
				id = id + (ID[i] - 'A' + 10);
			}
			else
			{
				return 0;
			}
		}	
		if (i < 7)
		{
			id = id << 4;
		}
	}
	return id;
}

int IntIDtoXY(unsigned int* IDArray, int ArrayLen, unsigned int id, float* X, float* Y)
{
	int low = 0;
	int mid;
	int high = ArrayLen - 1;
	int Match = 0;
	
	while (low <= high)
	{
		mid = (low + high) / 2;
		if (id < IDArray[mid])
		{
			high = mid - 1;
		}
		else if (id > IDArray[mid])
		{
			low = mid + 1;
		}
		else
		{
			Match = 1;
			break;
		}
	}
	if (Match)
	{
		if (mid > 99 && mid < 110)
		{
			*Y = 0.0;
		  *X = (mid - 99) * UNIT_LENGTH_X;
		}
		if (mid > 109 && mid < 120)
		{
			*Y = (mid - 109) * UNIT_LENGTH_Y;
		  *X = 0.0;
		}
		if (mid < 100)
		{
			*Y = (((int) (mid / TAG_X_NUM)) + 1) * UNIT_LENGTH_Y;
			*X = ((mid % TAG_X_NUM) + 1) * UNIT_LENGTH_X;
		}
		return 0;
	}
	else
	{
		return -1;
	}
}

unsigned int IDArray[] =
{
	72106521,

	72711705,

	82074393,

	119214067,

	120456179,

	125698803,

	132824818,

	133092850,

	342918937,

	393528818,

	393744371,

	401017843,

	401804787,

	589131447,

	597850039,

	658442995,

	659015922,

	662897907,

	666897651,

	667289331,

	668459506,

	859074999,

	869166263,

	931978226,

	934530034,

	1193347827,

	1194666227,

	1196294387,

	1197265394,

	1198118386,

	1199903219,

	1394896567,

	1398697143,

	1408069815,

	1459687411,

	1465975795,

	1467617267,

	1468594674,

	1468924147,

	1469317875,

	1470106611,

	1470304499,

	1473838578,

	1474217202,

	1475868658,

	1666938807,

	1668577463,

	1682670105,

	1728906995,

	1734927090,

	1739064051,

	1744161522,

	1744828146,

	1932359095,

	1944549303,

	1958181657,

	1999824370,

	1999829746,

	2005451506,

	2012864754,

	2203743415,

	2272836594,

	2276772594,

	2276789747,

	2278690803,

	2279007474,

	2281165554,

	2535312114,

	2537553906,

	2541345266,

	2542523122,

	2544090098,

	2545213170,

	2545605362,

	2700953387,

	2762104089,

	2802634482,

	2805402867,

	2805790194,

	2807432435,

	2809858035,

	2810892018,

	2811561203,

	2812334834,

	2817396979,

	2817850354,

	2818114547,

	3076578290,

	3077964275,

	3078884083,

	3080455667,

	3081569523,

	3083591666,

	3086287859,

	3280040887,

	3293217561,

	3340361458,

	3340685298,

	3342001394,

	3343302898,

	3344221938,

	3344562418,

	3344742898,

	3349088243,

	3350256882,

	3351381747,

	3353856754,

	3355117299,

	3608988402,

	3618044402,

	3619487218,

	3621389811,

	3877425138,

	3880387827,

	3882614514,

	3888185587,

	3891193330,

	3892313586,

	4144763379,

	4146326770,

	4147829490,

	4151321331,

	4154184690,

	4155555826


};